getCookie("language")||setCookie("tr");const userlang=getCookie("language");function setCookie(lang){document.cookie=`language = ${lang}`,location.reload()}function getCookie(cname){const name=`${cname}=`,decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";");for(let i=0;i<ca.length;i++){const c=ca[i];for(;" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}const initializeUI=()=>{const request=new XMLHttpRequest;function newElement({eType:eType,ePos:ePos,eCont:eCont,eAttr:eAttr}){if(eType&&void 0!==ePos){const newElem=document.createElement(eType);return void 0!==eCont&&(newElem.textContent=eCont),void 0!==eAttr&&eAttr.forEach(item=>{newElem.setAttribute(item[0],item[1])}),document.querySelector(ePos).appendChild(newElem)}console.log("Element oluşturulamadı! Eksik parametre.")}request.responseType="json",request.open("GET",`js/lang/${userlang}.json`),request.send(),request.onload=()=>{const jsonRespond=request.response,uiLang=jsonRespond.interface,firstQuestion=0;let questionCount=1;document.title=uiLang.title,document.querySelector(".pri-header h1").textContent=uiLang.title,document.querySelector(".pri-header h2").textContent=uiLang.subtitle,document.querySelector(".pri-header p").textContent=uiLang.description,document.querySelector("#version").textContent="beta-1.0.1";const developers=["fatihmeh","obdegirmenci"];document.querySelector("#developers").textContent=`${uiLang.devs} ${developers.join(", ")}`;const welcome=()=>{const elemStart=newElement({eType:"section",ePos:".pri-content",eAttr:[["class","app-welcome fadeIn"]]});newElement({eType:"p",ePos:".app-welcome",eAttr:[["class",".app-desciption"]],eCont:uiLang.appdescription}),newElement({eType:"img",ePos:".app-welcome",eAttr:[["class","app-mascot"],["src","assets/android-chrome-512x512.png"],["title",uiLang.appmascot],["alt",uiLang.appmascotAlt]]}),newElement({eType:"button",ePos:".app-welcome",eAttr:[["class","button-style1"]],eCont:uiLang.appstart}),document.querySelector(".button-style1").addEventListener("click",(function(){elemStart.classList.contains("fadeOut")?console.log("Animasyon bitmedi!"):(elemStart.classList.add("fadeOut"),elemStart.addEventListener("animationend",()=>{elemStart.remove(),document.querySelector(".pri-header").classList.add("header-busy"),createQuestions(jsonRespond,0)}))}))};welcome(),newElement({eType:"label",ePos:"#locale",eAttr:[["for","language-changer"]],eCont:uiLang.lang});const elemLang=newElement({eType:"select",ePos:"#locale",eAttr:[["id","language-changer"],["class","select-style"]]});function createQuestions(jsonObj,qID){const question=searchID=>void 0!==searchID?jsonObj.questions.find(question=>question.id===searchID):jsonObj.questions,questionLength=Object.keys(question()).length,answer=(question,answerID)=>void 0!==answerID?question.a[answerID]:question.a,answerLength=a=>Object.keys(answer(question(a))).length,elemQuestion=newElement({eType:"article",ePos:".pri-content",eAttr:[["data-question",qID],["class","slideIn"]]});elemQuestion.innerHTML=`\n            <header>\n               <div class='question-info'>#${questionCount}</div>\n               <p>${question(qID).q}</p>\n            </header> \n            <footer></footer>\n         `;const elemQuestionFooter=document.querySelector("[data-question] footer");let elemAnswer;answerLength(qID)<=2?elemQuestionFooter.classList.add("layout-row"):elemQuestionFooter.classList.add("layout-col"),elemQuestion.addEventListener("animationend",(function(){this.classList.remove("slideIn"),elemQuestionFooter.classList.add("fadeIn")}));for(let answerCount=0;answerCount<answerLength(qID);answerCount++)elemAnswer=newElement({eType:"button",ePos:"[data-question] footer",eAttr:[["data-answer",answerCount],["class","button-style2"]],eCont:answer(question(qID),answerCount).t}),questionOrResult(answer(question(qID),answerCount));function questionOrResult(answer){if(answer.hasOwnProperty("to"))elemAnswer.setAttribute("data-go",answer.to);else if(answer.hasOwnProperty("r")){let dataStop="";for(let resultCount=0;resultCount<answer.r.length;resultCount++)dataStop+=answer.r[resultCount]+" ";elemAnswer.setAttribute("data-stop",dataStop.split(" ",answer.r.length))}else console.log("Hatalı dosya yapılandırması.")}const answerbutton=document.querySelectorAll("[data-answer]");for(let i=0;i<answerbutton.length;i++)answerbutton[i].addEventListener("click",(function(){elemQuestion.classList.contains("slideOut")?console.log("Animasyon bitmedi!"):(elemQuestion.classList.add("slideOut"),elemQuestion.addEventListener("animationend",(function(){elemQuestion.remove(),answerbutton[i].hasAttribute("data-go")?(questionCount+=1,createQuestions(jsonRespond,Number(answerbutton[i].getAttribute("data-go")))):answerbutton[i].hasAttribute("data-stop")?(document.querySelector(".pri-header").classList.remove("header-busy"),document.querySelector(".pri-header").classList.add("header-final"),questionCount+=1,createResults(answerbutton[i].getAttribute("data-stop"))):(createQuestions(jsonRespond,Number(e.getAttribute("data-question"))),console.log("Geçerli bir seçenek değil!"))})))}));function createResults(answerAttr){const searchID=answerAttr.split(","),elemResultContainer=newElement({eType:"section",ePos:".pri-content",eAttr:[["id","suggestions"],["class","app-final slideIn"]],eCont:uiLang.appresults});elemResultContainer.innerHTML=`\n               <p class='blink'>${uiLang.appresults}</p>\n            `;for(let i=0;i<searchID.length;i++){let results=jsonObj.results.find(result=>result.id===Number(searchID[i]));const elemResult=newElement({eType:"article",ePos:"#suggestions",eAttr:[["data-result",searchID[i]]]});elemResult.innerHTML=`\n               <header>\n                  <h3>\n                     <a href='${results.h?results.h:results.h="#"}' target='_blank' class='result-links'>${results.s} &#128279</a>\n                  </h3>\n               </header>\n               <p>${results.rd?results.rd+" - ":results.rd=""}${results.o?results.o:results.o=uiLang.appErrorOrigin}</p>\n               <p>${results.d?results.d:results.o=uiLang.appErrorDescription}</p>\n               `}const elemReset=newElement({eType:"button",ePos:"#suggestions",eAttr:[["id","reset"],["class","button-style3"]],eCont:uiLang.apprestart});elemReset.addEventListener("click",(function(){elemResultContainer.classList.contains("fadeOut")?console.log("Animasyon bitmedi!"):(elemResultContainer.classList.add("fadeOut"),elemResultContainer.addEventListener("animationend",()=>{document.querySelector(".pri-header").classList.remove("header-final"),document.querySelector(".pri-content").innerHTML="",questionCount=1,welcome()}))}))}}elemLang.innerHTML=`\n         <option value='${getCookie("language")}'>(${uiLang.activelang})</option>\n         <option value='tr'>Türkçe</option>\n         <option value='en'>English</option>\n         <option value='demo'>Lorem</option>\n      `,document.querySelector("#language-changer").addEventListener("change",(function(){setCookie(this.value)}))}};initializeUI();